<!DOCTYPE html>
<html lang="ru">
<head>
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>–û–ø–ª–∞—Ç–∞ ‚Äî –¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è –¥–æ–≤–µ—Ä–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</title>

  <link rel="stylesheet" href="styles.css">

</head>
<body>

  <div class="wrap pay">
<div class="card">
      <h1>–û–ø–ª–∞—Ç–∞ –ø–æ–º–æ—â–∏</h1>
      <div class="sub">
        –õ–∏–Ω–∏—è: <span class="pill" id="linePill">‚Äî</span>
        &nbsp;|&nbsp; –°—É–º–º–∞ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ: <b id="sumText">‚Äî</b>
      </div>

      <!-- –ü–æ–ª—É—á–∞—Ç–µ–ª—å ‚Ññ1 -->
      <div class="box">
        <div class="row topRow">
  <div class="kv">
    <div class="k">–ü–æ–ª—É—á–∞—Ç–µ–ª—å (‚Ññ1 –≤ –æ—á–µ—Ä–µ–¥–∏)</div>
    <div class="v" id="toNick"></div>
  </div>

  <div class="kv cardTop">
    <div class="k">–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã</div>

    <div class="card-row">
      <div class="v" id="toCard"></div>

      <button id="copyCardBtn" type="button" class="copy-mini" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã">COPY</button>
    </div>

    <div class="copy-msg" id="copyMsg"></div>
  </div>
</div>    
        
<!-- –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è -->
<div class="box">
  <div class="note">
    <div class="noteTitle">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ–ø–ª–∞—Ç–µ</div>
    <ol class="steps">
      <li>–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –Ω–∞ –∫–∞—Ä—Ç—É —É—á–∞—Å—Ç–Ω–∏–∫–∞ ‚Ññ1 –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –í–∞—à–µ–≥–æ –ë–∞–Ω–∫–∞.</li>
      <li>–í –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞ —É–∫–∞–∂–∏—Ç–µ: <b>¬´–ü–æ–º–æ—â—å¬ª</b>.</li>
      <li>–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.</li>
    </ol>
  </div>
</div>

        
      </div>

      <!-- –°–∫—Ä–∏–Ω -->
<div class="box">

  <label class="file-btn" for="receiptFile">üìé –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫–≤–∏—Ç–∞–Ω—Ü–∏—é</label>
  <input type="file" id="receiptFile" accept="image/*" hidden>

  <div id="fileName" class="file-name"></div>
</div>

<!-- –Ø—Ä–ª—ã–∫ -->
<div class="box">
  <div class="checkRow">
    <input id="shortcutChk" type="checkbox">
    <label for="shortcutChk">–°–æ–∑–¥–∞—Ç—å —è—Ä–ª—ã–∫ –Ω–∞ —Ä–∞–±–æ—á–∏–π —Å—Ç–æ–ª</label>
  </div>
</div>


      <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
      <div class="box">
        <div class="checkRow">
          <input id="notifyChk" type="checkbox" />
          <div>
            <div>üîî –í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –ø–æ–º–æ—â–∏ –∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –æ—á–µ—Ä–µ–¥–∏</div>
            

           </div>
        </div>
      </div>

      <!-- –î–µ–π—Å—Ç–≤–∏—è -->
      <button class="btn-main" id="sentBtn" disabled>–î–∞–ª–µ–µ</button>
      <button class="btn-secondary" onclick="history.back()">–ù–∞–∑–∞–¥</button>

      <div class="note" id="resultMsg" style="margin-top:10px;"></div>
    </div>
  </div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  // ====== COPY –∫–∞—Ä—Ç—ã ======
  const copyBtn = document.getElementById("copyCardBtn");
  const card = document.getElementById("toCard");

  if (copyBtn && card) {
    copyBtn.addEventListener("click", async () => {
      const text = card.textContent.replace(/\s+/g, " ").trim();
      try {
        await navigator.clipboard.writeText(text);
        const old = copyBtn.textContent;
        copyBtn.textContent = "OK";
        setTimeout(() => copyBtn.textContent = old, 900);
      } catch (e) {
        alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å. –°–∫–æ–ø–∏—Ä—É–π –≤—Ä—É—á–Ω—É—é.");
      }
    });
  }

  // ====== FILE + –∏–º—è —Ñ–∞–π–ª–∞ + –∞–∫—Ç–∏–≤–∞—Ü–∏—è "–Ø –æ—Ç–ø—Ä–∞–≤–∏–ª –ø–æ–º–æ—â—å" ======
  const fileInput = document.getElementById("receiptFile");
  const nameBox   = document.getElementById("fileName");
  const sentBtn   = document.getElementById("sentBtn");
  const notifyChk = document.getElementById("notifyChk");

  function refreshSentBtn() {
    const hasFile = !!(fileInput && fileInput.files && fileInput.files.length > 0);
    const notifyOk = !notifyChk || notifyChk.checked; // –µ—Å–ª–∏ —á–µ–∫–±–æ–∫—Å–∞ –Ω–µ—Ç ‚Äî —Å—á–∏—Ç–∞–µ–º –æ–∫
    if (sentBtn) sentBtn.disabled = !(hasFile && notifyOk);
  }

  if (fileInput) {
    fileInput.addEventListener("change", () => {
      if (nameBox) nameBox.textContent = fileInput.files[0] ? fileInput.files[0].name : "–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω.";
      refreshSentBtn();
    });
  }

  if (notifyChk) notifyChk.addEventListener("change", refreshSentBtn);

  refreshSentBtn();
});
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {

  // 1. –ß–∏—Ç–∞–µ–º –ª–∏–Ω–∏—é –∏–∑ URL –∏–ª–∏ localStorage
  const params = new URLSearchParams(location.search);
  const lineFromUrl = params.get("line");

  if (lineFromUrl) {
    localStorage.setItem("line", lineFromUrl);
  }

  const line = localStorage.getItem("line") || "50";

  // 2. –î–∞–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ –ª–∏–Ω–∏—è–º
  const firstByLine = {
    "10":  { nick: "–û–ª–µ–Ω–∞", card: "5375 1234 5678 1234" },
    "50":  { nick: "–í–∞–¥–∏–º", card: "4441 2222 3333 2222" },
    "100": { nick: "–ê–Ω–Ω–∞",  card: "5375 5555 6666 5555" }
  };

  const first = firstByLine[line] || firstByLine["50"];

  // 3. –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  document.getElementById("linePill").textContent = line;
  document.getElementById("sumText").textContent = line + " –≥—Ä–Ω";

  document.getElementById("toNick").textContent = first.nick;
  document.getElementById("toCard").textContent = first.card;

});
</script>
</div>
</div>
<script>
document.addEventListener("DOMContentLoaded", () => {

  const receipt = document.getElementById("receiptFile");
  const notify  = document.getElementById("notifyChk");
  const btn     = document.getElementById("sentBtn");
  const notifyRow = notify.closest(".checkRow");

  // —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  btn.classList.add("waiting");

  // 1. –ü—Ä–∏–∫—Ä–µ–ø–∏–ª–∏ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é
  receipt.addEventListener("change", () => {
    if (receipt.files.length > 0) {
      btn.classList.remove("waiting");
      btn.classList.add("ready");
      btn.disabled = false;
    }
  });

  // 2. –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
btn.addEventListener('click', (e) => {
  e.preventDefault();

  // –µ—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
  if (btn.disabled) return;

  // –µ—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ù–ï –≤–∫–ª—é—á–µ–Ω—ã ‚Äî –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –±–ª–æ–∫ –∏ –ù–ï –ø–µ—Ä–µ—Ö–æ–¥–∏–º
  if (!notify.checked) {
    notifyRow.classList.add('attention');
    notifyRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
    setTimeout(() => notifyRow.classList.remove('attention'), 2500);
    return;
  }

  // —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã ‚Äî –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
  const line = localStorage.getItem('line') || '50';
  location.href = `warning.html?line=${encodeURIComponent(line)}`;
});


  // 3. –í–∫–ª—é—á–∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Üí –∫–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞
  notify.addEventListener("change", () => {
    if (notify.checked && receipt.files.length > 0) {
      btn.classList.remove("ready");
      btn.classList.add("active");
      btn.disabled = false;
    }
  });

});
</script>

</body>
</html>




